---
// React components (features)
import CarouselInterview from '@/components/features/carousel/InterviewCarousel';
import Carousel from '@/components/features/carousel/Carousel';

// Types
// @ts-ignore
import type { Pauta } from '@/lib/api/pautas';
import type { Interview } from '@/lib/api/interviews';

// Astro components (UI)
import Titles from '@/components/ui/Titles.astro';

// Props interface
interface Props {
	/** Array of promotional content (pautas) to display */
	pautas: Pauta[];
	/** Array of interviews to display */
	interviews: Interview[];
}

// Destructure props
const { pautas, interviews }: Props = Astro.props;

// Transform pautas to CarouselImage format (add id field and filter nulls)
const pautasForCarousel = pautas
	.filter((pauta) => pauta.image !== null)
	.map((pauta, index) => ({
		id: `pauta-${index}`,
		title: pauta.title,
		image: pauta.image!
	}));
---

<section id="ContainerInterview-Magazine" class="container-main my-24">
	<Titles text="Entrevista y pautas del mes" />

	<div class="grid gap-8 md:grid-cols-2">
		<!-- Entrevistas -->
		<div
			class="group relative aspect-video overflow-hidden rounded-3xl bg-gradient-to-br from-green-600 via-green-700 to-emerald-900 shadow-2xl transition-all duration-300"
		>
			<CarouselInterview interviews={interviews} client:visible />

			<div
				class="pointer-events-none absolute inset-x-0 top-0 bg-gradient-to-b from-black/60 via-black/20 to-transparent p-6 pb-12"
			>
				<div class="space-y-0.5">
					<h3 class="line-clamp-1 text-base font-bold text-white md:text-lg">
						Entrevistas Destacadas
					</h3>
					<p class="line-clamp-1 text-[10px] text-gray-100/90 md:text-xs">
						Conversaciones con expertos del derecho
					</p>
				</div>
			</div>
		</div>

		<!-- Pautas -->
		<div
			class="group relative aspect-video overflow-hidden rounded-3xl bg-gradient-to-br from-emerald-600 via-green-700 to-green-800 shadow-2xl transition-all duration-300"
		>
			<Carousel
				width="w-full"
				autoplaySpeed={5000}
				dotDuration={true}
				data={pautasForCarousel}
				client:visible
			/>

			<!-- Texto ARRIBA -->
			<div
				class="pointer-events-none absolute inset-x-0 top-0 bg-gradient-to-b from-black/60 via-black/20 to-transparent p-6 pb-12"
			>
				<div class="space-y-0.5">
					<h3 class="line-clamp-1 text-base font-bold text-white md:text-lg">Pautas Destacadas</h3>
					<p class="line-clamp-1 text-[10px] text-gray-100/90 md:text-xs">
						Mensajes de nuestros aliados y patrocinadores
					</p>
				</div>
			</div>
		</div>
	</div>
</section>

<style>
	.container-main {
		margin-left: auto;
		margin-right: auto;
		max-width: 80rem;
		padding-left: 1rem;
		padding-right: 1rem;
	}

	@media (min-width: 640px) {
		.container-main {
			padding-left: 1.5rem;
			padding-right: 1.5rem;
		}
	}

	@media (min-width: 1024px) {
		.container-main {
			padding-left: 2rem;
			padding-right: 2rem;
		}
	}
</style>
