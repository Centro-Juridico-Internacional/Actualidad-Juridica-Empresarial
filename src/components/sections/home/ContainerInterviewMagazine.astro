---
// React components (features)
import CarouselInterview from '@/components/features/carousel/InterviewCarousel';
import Carousel from '@/components/features/carousel/Carousel';

// Types
// @ts-ignore
import type { Pauta } from '@/lib/api/pautas';
import type { Interview } from '@/lib/api/interviews';

// Astro components (UI)
import Titles from '@/components/ui/Titles.astro';

// Interfaz de Propiedades
interface Props {
	/** Contenido promocional (pautas) para carrusel */
	pautas: Pauta[];
	/** Entrevistas destacadas en formato video/capsula */
	interviews: Interview[];
}

// DesestructuraciÃ³n de propiedades
const { pautas, interviews }: Props = Astro.props;

// Transformar pautas al formato requerido por CarouselImage (manejo de nulos)
const pautasForCarousel = pautas
	.filter((pauta) => pauta.image !== null)
	.map((pauta, index) => ({
		id: `pauta-${index}`,
		title: pauta.title,
		image: pauta.image!
	}));
---

<section class="containerInterviewMagazine h-fit w-full py-1">
	<section id="ContainerInterview-Magazine" class="container-main my-20">
		<Titles text="Entrevista y pautas del mes" white={true} />

		<div class="grid gap-8 md:grid-cols-2">
			<!-- Columna: Entrevistas -->
			<div
				class="group relative aspect-video overflow-hidden rounded-3xl bg-gradient-to-br from-green-600 via-green-700 to-emerald-900 shadow-2xl transition-all duration-300"
			>
				<CarouselInterview interviews={interviews} client:visible />

				<div
					class="pointer-events-none absolute inset-x-0 top-0 bg-gradient-to-b from-black/60 via-black/20 to-transparent p-6 pb-12"
				>
					<div class="space-y-0.5">
						<h3 class="line-clamp-1 text-base font-bold text-white md:text-lg">
							Entrevistas Destacadas
						</h3>
						<p class="line-clamp-1 text-[10px] text-gray-100/90 md:text-xs">
							Conversaciones con expertos del derecho
						</p>
					</div>
				</div>
			</div>

			<!-- Columna: Pautas Publicitarias -->
			<div
				class="group relative aspect-video overflow-hidden rounded-3xl bg-gradient-to-br from-emerald-600 via-green-700 to-green-800 shadow-2xl transition-all duration-300"
			>
				<Carousel
					width="w-full"
					autoplaySpeed={5000}
					dotDuration={true}
					data={pautasForCarousel}
					client:visible
				/>

				<!-- Texto ARRIBA -->
				<div
					class="pointer-events-none absolute inset-x-0 top-0 bg-gradient-to-b from-black/60 via-black/20 to-transparent p-6 pb-12"
				>
					<div class="space-y-0.5">
						<h3 class="line-clamp-1 text-base font-bold text-white md:text-lg">
							Pautas Destacadas
						</h3>
						<p class="line-clamp-1 text-[10px] text-gray-100/90 md:text-xs">
							Mensajes de nuestros aliados y patrocinadores
						</p>
					</div>
				</div>
			</div>
		</div>
	</section>
</section>

<style>
	.containerInterviewMagazine {
		width: 100%;
		height: 100%;
		background-color: #008531e1;
		background-image: radial-gradient(rgba(255, 255, 255, 0.918) 1px, transparent 0);
		background-size: 30px 30px;
		background-position: -3px -3px;
	}
</style>
