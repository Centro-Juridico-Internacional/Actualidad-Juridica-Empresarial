---
// React components (features)
import CarouselNews from '@/components/features/carousel/NewsCarousel';
import NewsComponent from '@/components/features/news/NewsComponent';

// Types
import type { NewsArticle } from '@/lib/api/news';

// Interfaz de Propiedades
interface Props {
	/** Array de artículos de noticias para mostrar en el grid */
	products: NewsArticle[];
}

// Desestructuración de propiedades para acceso directo
const { products }: Props = Astro.props;
---

<section id="newsSectionContainer" class="container-main mt-8 mb-24">
	<!-- Layout de Cuadrícula (Grid): 5 columnas en escritorio con filas automáticas de ~240px -->
	<div class="grid gap-6 md:auto-rows-[240px] md:grid-cols-5">
		<!-- Carrusel Principal: Ocupa 3 columnas y 2 filas (Área destacada) -->
		<div
			class="group relative col-span-5 h-full overflow-hidden rounded-2xl md:col-span-3 md:row-span-2"
		>
			<div id="mainCarouselDynamic" class="relative h-full w-full">
				<CarouselNews products={products} client:visible />
			</div>
		</div>

		<!-- Featured Card 1 -->
		<div class="col-span-5 h-full rounded-2xl md:col-span-2">
			<div
				class="group relative h-full overflow-hidden rounded-2xl transition-transform duration-300 hover:-translate-y-1"
			>
				{products[3] && (
					<img
						src={products[3].image || ''}
						alt={products[3].title || ''}
						class="absolute inset-0 h-full w-full scale-[1.001] object-cover object-center transition-transform duration-700 ease-out will-change-transform group-hover:scale-105"
						loading="lazy"
						decoding="async"
					/>
				)}
				<div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/50 to-transparent">
				</div>
				{products[3] && (
					<NewsComponent
						product={products[3]}
						truncateWords={30}
						bgOverlay={true}
						className="relative h-full"
						showContent={false}
						variant="compact"
					/>
				)}
			</div>
		</div>

		<!-- Featured Card 2 -->
		<div class="col-span-5 h-full rounded-2xl md:col-span-2">
			<div
				class="group relative h-full overflow-hidden rounded-2xl transition-transform duration-300 hover:-translate-y-1"
			>
				{products[4] && (
					<img
						src={products[4].image || ''}
						alt={products[4].title || ''}
						class="absolute inset-0 h-full w-full scale-[1.001] object-cover object-center transition-transform duration-700 ease-out will-change-transform group-hover:scale-105"
						loading="lazy"
						decoding="async"
					/>
				)}
				<div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/50 to-transparent">
				</div>
				{products[4] && (
					<NewsComponent
						product={products[4]}
						truncateWords={30}
						bgOverlay={true}
						className="relative h-full"
						showContent={false}
						variant="compact"
					/>
				)}
			</div>
		</div>
	</div>
</section>
