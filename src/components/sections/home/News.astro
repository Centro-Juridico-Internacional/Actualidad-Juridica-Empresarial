---
// React components (features)
import CarouselNews from '@/components/features/carousel/NewsCarousel';
import NewsComponent from '@/components/features/news/NewsComponent';

// Types
import type { NewsArticle } from '@/lib/api/news';

// Props interface
interface Props {
	/** Array of news articles to display */
	products: NewsArticle[];
}

// Destructure props
const { products }: Props = Astro.props;
---

<section id="newsSectionContainer" class="container-main mt-8 mb-24">
	<!-- Grid layout: 5 columns on md+ with auto rows of ~240px -->
	<div class="grid gap-6 md:auto-rows-[240px] md:grid-cols-5">
		<!-- Main carousel: 3 columns and 2 rows -->
		<div
			class="group relative col-span-5 h-full overflow-hidden rounded-2xl md:col-span-3 md:row-span-2"
		>
			<div id="mainCarouselDynamic" class="relative h-full w-full">
				<CarouselNews products={products} client:visible />
			</div>
		</div>

		<!-- Featured Card 1 -->
		<div class="col-span-5 h-full rounded-2xl md:col-span-2">
			<div
				class="group relative h-full overflow-hidden rounded-2xl transition-transform duration-300 hover:-translate-y-1"
			>
				<img
					src={products[3].image}
					alt={products[3].titulo}
					class="absolute inset-0 h-full w-full scale-[1.001] object-cover object-center transition-transform duration-700 ease-out will-change-transform group-hover:scale-105"
					loading="lazy"
					decoding="async"
				/>
				<div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/50 to-transparent">
				</div>
				<NewsComponent
					product={products[3]}
					truncateWords={30}
					bgOverlay={true}
					className="relative h-full"
					showContent={false}
					variant="compact"
				/>
			</div>
		</div>

		<!-- Featured Card 2 -->
		<div class="col-span-5 h-full rounded-2xl md:col-span-2">
			<div
				class="group relative h-full overflow-hidden rounded-2xl transition-transform duration-300 hover:-translate-y-1"
			>
				<img
					src={products[4].image}
					alt={products[4].titulo}
					class="absolute inset-0 h-full w-full scale-[1.001] object-cover object-center transition-transform duration-700 ease-out will-change-transform group-hover:scale-105"
					loading="lazy"
					decoding="async"
				/>
				<div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/50 to-transparent">
				</div>
				<NewsComponent
					product={products[4]}
					truncateWords={30}
					bgOverlay={true}
					className="relative h-full"
					showContent={false}
					variant="compact"
				/>
			</div>
		</div>
	</div>
</section>

<style>
	.container-main {
		margin-left: auto;
		margin-right: auto;
		width: 100%;
		max-width: 80rem;
		padding-left: 1rem;
		padding-right: 1rem;
	}
	@media (min-width: 640px) {
		.container-main {
			padding-left: 1.5rem;
			padding-right: 1.5rem;
		}
	}
	@media (min-width: 1024px) {
		.container-main {
			padding-left: 2rem;
			padding-right: 2rem;
		}
	}
</style>
