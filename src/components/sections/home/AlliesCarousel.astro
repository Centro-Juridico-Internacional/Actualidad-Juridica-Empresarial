---
import Titles from '@/components/ui/Titles.astro';

/**
 * AlliesCarousel.astro
 * Infinite scrolling marquee for company allies/partners
 */

const allies = [
	{
		name: 'Apple',
		logo: 'https://cdn.worldvectorlogo.com/logos/apple-13.svg',
		url: 'https://apple.com'
	},
	{
		name: 'Google',
		logo: 'https://cdn.worldvectorlogo.com/logos/google-g-2015.svg',
		url: 'https://google.com'
	},
	{
		name: 'Microsoft',
		logo: 'https://cdn.worldvectorlogo.com/logos/microsoft-5.svg',
		url: 'https://microsoft.com'
	},
	{
		name: 'Amazon',
		logo: 'https://cdn.worldvectorlogo.com/logos/logo-amazon.svg',
		url: 'https://amazon.com'
	},
	{
		name: 'Facebook',
		logo: 'https://cdn.worldvectorlogo.com/logos/facebook.svg',
		url: 'https://facebook.com'
	},
	{
		name: 'Tesla',
		logo: 'https://cdn.worldvectorlogo.com/logos/tesla-pure.svg',
		url: 'https://tesla.com'
	},
	{ name: 'X', logo: 'https://cdn.worldvectorlogo.com/logos/x-2.svg' }, // No URL example
	{
		name: 'Netflix',
		logo: 'https://cdn.worldvectorlogo.com/logos/netflix-logo-icon.svg',
		url: 'https://netflix.com'
	},
	{
		name: 'Spotify',
		logo: 'https://cdn.worldvectorlogo.com/logos/spotify-2.svg',
		url: 'https://spotify.com'
	},
	{
		name: 'Nike',
		logo: 'https://cdn.worldvectorlogo.com/logos/nike-8.svg',
		url: 'https://nike.com'
	}
];

// Duplicate list for seamless infinite scroll
const doubleAllies = [...allies, ...allies];
---

<section class="allies-carousel-section my-24" id="alliesSection">
	<Titles text="Nuestros Aliados EstratÃ©gicos" />

	<div class="marquee">
		<div class="marquee-content">
			{
				doubleAllies.map((ally) => (
					<div class="ally-item">
						{ally.url ? (
							<a
								href={ally.url}
								target="_blank"
								rel="noopener noreferrer"
								class="ally-link"
								title={ally.name}
							>
								<img src={ally.logo} alt={ally.name} loading="lazy" />
							</a>
						) : (
							<div class="ally-link no-click" title={ally.name}>
								<img src={ally.logo} alt={ally.name} loading="lazy" />
							</div>
						)}
					</div>
				))
			}
		</div>
	</div>
</section>

<style>
	.allies-carousel-section {
		overflow: hidden;
		background: transparent;
	}

	.marquee {
		position: relative;
		display: flex;
		overflow: hidden;
		user-select: none;
		gap: 4rem;
		mask-image: linear-gradient(to right, transparent, black 15%, black 85%, transparent);
		-webkit-mask-image: linear-gradient(to right, transparent, black 15%, black 85%, transparent);
	}

	.marquee-content {
		flex-shrink: 0;
		display: flex;
		justify-content: space-around;
		min-width: 100%;
		gap: 4rem;
		animation: scroll 40s linear infinite;
	}

	.marquee:hover .marquee-content {
		animation-play-state: paused;
	}

	.ally-item {
		flex-shrink: 0;
		display: flex;
		align-items: center;
		justify-content: center;
		width: 120px;
		height: 80px;
	}

	.ally-link {
		display: flex;
		align-items: center;
		justify-content: center;
		width: 100%;
		height: 100%;
		transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
		filter: grayscale(1);
		opacity: 0.6;
	}

	.ally-link:hover {
		filter: grayscale(0);
		opacity: 1;
		transform: scale(1.15);
	}

	.no-click {
		cursor: default;
	}

	.ally-link img {
		max-width: 80%;
		max-height: 50%;
		object-fit: contain;
		pointer-events: none;
	}

	@keyframes scroll {
		from {
			transform: translateX(0);
		}
		to {
			transform: translateX(calc(-100% - 4rem));
		}
	}

	@media (max-width: 768px) {
		.ally-item {
			width: 100px;
		}
		.marquee {
			gap: 2.5rem;
		}
		.marquee-content {
			gap: 2.5rem;
			animation-duration: 30s;
		}
		@keyframes scroll {
			from {
				transform: translateX(0);
			}
			to {
				transform: translateX(calc(-100% - 2.5rem));
			}
		}
	}
</style>
