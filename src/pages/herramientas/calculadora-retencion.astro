---
/**
 * Herramienta: Calculadora de Retención en la Fuente
 * =================================================
 * Proyecta la retención mensual para trabajadores dependientes (Procedimiento 1).
 * Aplica depuración de renta: aportes a salud/pensión, dependientes y UVT vigente.
 */
import Layout from '@/layouts/Layout.astro';
import Breadcrumb from '@/components/ui/Breadcrumb.astro';
import RetencionCalculator from '@/components/features/tools/RetencionCalculator.tsx';
import PageHero from '@/components/ui/PageHero.astro';

// Captura de URL absoluta para el esquema de datos
const { href } = Astro.url;

/**
 * Metadata Estructurada - WebApplication
 * Categorización financiera para motores de búsqueda.
 */
const schema = {
	'@context': 'https://schema.org',
	'@type': 'WebApplication',
	name: 'Calculadora de Retención en la Fuente',
	operatingSystem: 'All',
	applicationCategory: 'FinanceApplication',
	url: href,
	description:
		'Calculadora oficial de retención en la fuente por salarios en Colombia. UVT, deducciones, renta exenta y tabla progresiva.',
	provider: {
		'@type': 'Organization',
		name: 'Centro Jurídico Internacional'
	},
	offers: {
		'@type': 'Offer',
		price: '0',
		priceCurrency: 'COP'
	}
};
---

<script type="application/ld+json" set:html={JSON.stringify(schema)} />

<Layout title="Retención en la Fuente" booleanLayout={true} breadcrumbTitle="Herramientas">
	<PageHero
		title="Calculadora de Retención en la Fuente"
		subtitle="Calcula la retención mensual aplicando UVT, deducciones y tabla progresiva oficial."
	/>

	<section class="container-main py-12">
		<Breadcrumb title="Herramientas" className="mb-8" />

		<div class="flex flex-col items-center">
			<RetencionCalculator client:load />

			<div class="prose prose-secondary mt-12 max-w-3xl rounded-2xl bg-gray-50 p-8 text-gray-600">
				<h3>¿Cómo funciona esta herramienta?</h3>
				<p>Implementa el Procedimiento 1 de retención para trabajadores dependientes:</p>
				<ul>
					<li>Límite legal del 25% renta exenta</li>
					<li>Deducciones: salud, pensión, dependientes, intereses vivienda</li>
					<li>Conversión a UVT y tabla progresiva</li>
					<li>UVT actual oficial</li>
				</ul>
				<p>Es una estimación aproximada acorde con normativa vigente DIAN.</p>
			</div>
		</div>
	</section>
</Layout>
