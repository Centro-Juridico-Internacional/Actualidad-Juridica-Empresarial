---
// Props interface
interface Props {
	booleanBanner: boolean;
}

// Internal API imports
import { getBanner } from '@/lib/api/banner';
import Carousel from '@/components/features/carousel/Carousel';

// Destructure props with explicit typing
const { booleanBanner }: Props = Astro.props;

// Fetch unique banner (which now contains multiple images)
const banner = await getBanner();

// Convert multiple images to CarouselImage format
const carouselData = (banner?.banners ?? []).map((imgUrl, index) => ({
	id: `${banner.slug || 'main-banner'}-${index}`,
	title: banner.nombre || 'Banner Principal',
	image: imgUrl,
	url: 'https://seminariojuridico.com/' // Persistent link
}));

if (carouselData.length === 0) {
	console.log('[BannerHeader] No se encontraron banners para mostrar.');
}
---

{
	carouselData.length > 0 && (
		<div
			class:list={[
				'banner-header-container relative mx-auto w-full max-w-[1260px] overflow-hidden  transition-transform duration-300 hover:scale-[1.005]',
				{ hidden: booleanBanner }
			]}
		>
			<div class="mx-auto w-full h-full">
				<Carousel
					width="w-full"
					dotDuration={true}
					autoplaySpeed={5000}
					data={carouselData}
					client:load
				/>
			</div>
			<div class="pointer-events-none absolute inset-0 bg-gradient-to-r from-black/10 to-transparent opacity-0 transition-opacity duration-300 hover:opacity-100" />
		</div>
	)
}

<style>
	.banner-header-container {
		height: 30vh;
		min-height: 120px;
		object-fit: cover;
	}

	@media (max-width: 768px) {
		.banner-header-container {
			height: auto;
			min-height: 100px;
			object-fit: contain;
		}
	}

	/* Asegurar que las imágenes dentro del carrusel cubran el área */
	.banner-header-container :global(img) {
		height: 100%;
		width: 100%;
		
		object-position: center;
	}
</style>
